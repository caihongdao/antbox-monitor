import json

ip_string = "10.1.101.1 10.2.101.1 10.1.102.1 10.2.102.1 10.1.103.1 10.2.103.1 10.1.104.1 10.2.104.1 10.1.105.1 10.2.105.1 10.1.106.1 10.2.106.1 10.1.107.1 10.2.107.1 10.1.108.1 10.2.108.1 10.1.109.1 10.2.109.1 10.1.110.1 10.2.110.1 10.1.111.1 10.2.111.1 10.1.112.1 10.2.112.1 10.1.113.1 10.2.113.1 10.1.114.1 10.2.114.1 10.1.115.1 10.2.115.1 10.1.116.1 10.2.116.1 10.1.117.1 10.2.117.1 10.1.118.1 10.2.118.1 10.1.119.1 10.2.119.1 10.1.120.1 10.2.120.1 10.1.121.1 10.2.121.1 10.1.122.1 10.2.122.1 10.1.123.1 10.2.123.1 10.1.124.1 10.2.124.1 10.1.125.1 10.2.125.1 10.1.126.1 10.2.126.1 10.1.127.1 10.2.127.1 10.1.128.1 10.2.128.1 10.1.129.1 10.2.129.1 10.1.130.1 10.2.130.1 10.1.131.1 10.2.131.1 10.1.132.1 10.2.132.1 10.1.133.1 10.2.133.1 10.1.134.1 10.2.134.1 10.1.135.1 10.2.135.1 10.1.136.1 10.2.136.1 10.1.137.1 10.2.137.1 10.1.138.1 10.2.138.1 10.1.139.1 10.2.139.1 10.1.140.1 10.2.140.1 10.1.141.1 10.2.141.1 10.1.142.1 10.2.142.1 10.1.143.1 10.2.143.1 10.1.144.1 10.2.144.1 10.1.145.1 10.2.145.1 10.1.146.1 10.2.146.1 10.1.147.1 10.2.147.1 10.1.148.1 10.2.148.1 10.1.149.1 10.2.149.1 10.1.150.1 10.2.150.1 10.3.101.1 10.3.102.1 10.3.103.1 10.3.104.1 10.3.105.1 10.3.106.1 10.3.107.1 10.3.108.1 10.3.109.1 10.3.110.1 10.3.111.1 10.3.112.1 10.3.113.1 10.3.114.1 10.3.115.1 10.3.116.1 10.3.117.1 10.3.118.1 10.3.129.1 10.3.130.1 10.3.131.1 10.3.132.1 10.3.133.1 10.3.134.1 10.3.135.1 10.3.136.1 10.3.137.1 10.3.138.1 10.3.139.1 10.3.140.1 10.3.141.1 10.3.142.1 10.3.143.1 10.3.144.1 10.4.101.1 10.4.102.1 10.4.103.1 10.4.104.1 10.4.105.1 10.4.106.1 10.4.107.1 10.4.108.1 10.4.109.1 10.4.110.1 10.4.111.1 10.4.113.1 10.4.114.1 10.4.115.1 10.4.116.1 10.4.117.1 10.4.118.1 10.4.138.1 10.4.139.1 10.4.140.1 10.4.143.1 10.4.144.1"

ips = ip_string.split()
sites = []

for idx, ip in enumerate(ips):
    # generate a dummy location
    parts = ip.split('.')
    zone = parts[1]
    rack = parts[2]
    location = f"Zone {zone}, Rack {rack}"
    sites.append({
        "ip": ip,
        "location": location
    })

# output to config/all_sites.json
with open('config/all_sites.json', 'w') as f:
    json.dump({"sites": sites}, f, indent=2)

print(f"Updated config/all_sites.json with {len(sites)} IPs.")

